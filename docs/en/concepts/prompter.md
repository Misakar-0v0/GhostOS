# Prompter

Providing prompts to large language models will inevitably move towards structuring and modularization. Traditional
template languages cannot handle the complexity of Prompt Engineering.

The author believes that Prompt Engineering should use something similar to the front-end interface's `DOM` (Document
Object Model) to build, possibly called `POM` (Prompt Object Model).

The System Prompt generated by LLM is essentially a `POM Tree`, which can assemble various context-related data objects
into a prompt.

Some foreseeable benefits of `POM`:

1. Nodes can be encapsulated with data structures, making them easy to reuse in other projects.
2. Complex UI interfaces can be mapped to `POM Tree`, automatically providing LLM with additional visual object
   information.
3. `POM Tree` can be rendered on the front end, making it easy for humans to manage sufficiently complex contexts, even
   with visual rendering.
4. `POM Tree` can be programmed, so it can be generated autonomously by Meta-Agents.
5. Tokens can be prioritized and pruned specifically for `POM Tree`.

The implementation of this technology is not a goal of `GhostOS` itself, but since the open-source community has not yet
provided a mature `Prompt Object Model` implementation, the author has implemented a simplified version.

详见: [ghostos_common.prompter](https://github.com/ghost-in-moss/GhostOS/tree/main/libs/ghostos/ghostos/prompter.py)

Take [MossAgent](/en/usages/moss_agent.md) as example:

```python
 def _get_instruction_prompter(self, session: Session, runtime: MossRuntime) -> Prompter:
    agent = self.ghost
    return TextPrmt().with_children(
        # system meta prompt
        TextPrmt(
            title="Meta Instruction",
            content=AGENT_META_INTRODUCTION,
        ).with_children(
            TextPrmt(title="GhostOS", content=GHOSTOS_INTRODUCTION),
            TextPrmt(title="MOSS", content=MOSS_INTRODUCTION),
            # code context
            get_moss_context_prompter("Code Context", runtime),
        ),

        # agent prompt
        TextPrmt(
            title="Agent Info",
            content="The Agent info about who you are and what you are doing: ",
        ).with_children(
            get_agent_identity("Identity", agent.__identifier__()),
            TextPrmt(title="Persona", content=self._get_agent_persona(session, runtime)),
            TextPrmt(title="Instruction", content=self._get_agent_instruction(session, runtime)),
        ),

        # context prompt
        TextPrmt(
            title="Context",
            content="",
        ).with_children(
            self._get_context_prompter(session),
        )
    )
```